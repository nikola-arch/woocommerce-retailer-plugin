!function(){var e=function(){for(var e in window)if(window.hasOwnProperty(e)&&e.endsWith("_dashboard")&&"object"==typeof window[e]&&window[e].retailer_slug)return window[e];throw new Error("Retailer configuration not found. Please ensure constants.php is properly configured.")}();jQuery(document).ready(function(i){var t,o=document.getElementById("shopwoo-iframe"),n=i((t="iframe-container","#"+e.retailer_slug+"-"+t));if(o){n.prepend('<div class="iframe-loading" id="iframe-loading"><p>Loading '+e.retailer_slug.charAt(0).toUpperCase()+e.retailer_slug.slice(1)+" App...</p></div>"),o.onload=function(){try{var i=o.contentDocument||o.contentWindow.document;if(i&&i.body&&0===i.body.innerHTML.length)return void n.html('<div class="notice notice-error"><p><strong>Dashboard blocked by browser security.</strong><br>Try: <a href="'+o.src+'" target="_blank">Open in new tab</a> or disable browser shields.</p></div>')}catch(e){}d();try{if(o.contentWindow){var t=new URL(e.iframe_url).origin;try{o.contentWindow.postMessage({type:"parent_ready",source:"woocommerce_plugin"},t)}catch(e){try{o.contentWindow.postMessage({type:"parent_ready",source:"woocommerce_plugin"},"*")}catch(e){}}}}catch(e){}},o.onerror=function(){d(),n.html('<div class="notice notice-error"><p>Failed to load dashboard. Please try refreshing the page.</p></div>')},window.addEventListener("message",function(t){var r=new URL(e.iframe_url).origin;if(t.origin===r){var s=t.data;switch(s.type){case"iframe_ready":d();break;case"resize_iframe":s.height&&s.height>400&&i(o).animate({height:Math.min(s.height,i(window).height()-100)+"px"},300);break;case"error":n.prepend('<div class="notice notice-error is-dismissible"><p>Error: '+s.message+'</p><button type="button" class="notice-dismiss"></button></div>');break;case"success":n.prepend('<div class="notice notice-success is-dismissible"><p>'+s.message+'</p><button type="button" class="notice-dismiss"></button></div>');break;case"logout":window.location.reload()}}},!1),i(document).on("click",".notice-dismiss",function(){i(this).closest(".notice").fadeOut()}),setTimeout(function(){i(".notice.is-dismissible").fadeOut()},5e3),setTimeout(function(){i("#iframe-loading").length>0&&(i("#iframe-fallback").show(),d())},8e3);var r="wc-oauth-success";if("1"===new URLSearchParams(window.location.search).get(r)){n.prepend('<div class="notice notice-success is-dismissible"><p>WooCommerce authorization successful! Your store is now connected.</p><button type="button" class="notice-dismiss"></button></div>');var s=window.location.href.split("?")[0],a=new URLSearchParams(window.location.search);a.delete(r);var c=a.toString();c&&(s+="?"+c),window.history.replaceState({},document.title,s)}}function d(){i("#iframe-loading").remove()}})}();
//# sourceMappingURL=dashboard.min.js.map